
  <view class="container">
    <view class="userinfo" bindtap="handleViewTap">
      <image class="userinfo-avatar" src="{{ userInfo.avatarUrl }}" background-size="cover"/>
      <view class="userinfo-nickname">{{ userInfo.nickName }}</view>
    </view>

    <view class="company-msg">
        <view class="title">
          <!-- <button open-type="getPhoneNumber" bindgetphonenumber="getPhoneNumber">授权获取手机号码 </button> -->
          <button type="primary" size="mini" bindtap="handleQuery">纳税人一户式查询入口  >></button>
          <button type="primary" size="mini" bindtap="handleAddCompany">
            新增绑定公司
          </button>
        </view>

      <view  wx:for="{{ companies }}" wx:key="index" class="company-detail-container">
          <view class="company-num">
            <text>
              公司信息{{ index + 1 }}:
            </text>
            <button class="delete-company" type="warn" size="mini" bindtap="handleDeleteCompany" data-wpyhandledeletecompany-a="{{ index }}">删除</button>
          </view>
          <view class="company-detail">
            <view class="company-title">
              <text>公司名称:</text>
            </view>
            <view class="company-value">
              <input type="text" value="{{ item.companyName }}" placeholder="请输入公司名称" bindinput="handleInput" data-wpyhandleinput-a="{{ index }}" data-wpyhandleinput-b="companyName"/>
            </view>
          </view>

          <view class="company-detail">
            <view class="company-title">
              <text>
                纳税人识别号:
              </text>
            </view>
            <view class="company-value">
              <input type="text" value="{{ item.personNum }}" placeholder="请输入纳税人识别号" bindinput="handleInput" data-wpyhandleinput-a="{{ index }}" data-wpyhandleinput-b="personNum"/>
            </view>
          </view>

          <view class="company-detail">
            <view class="company-title">
              <text>
                联系人姓名:
              </text>
            </view>
            <view class="company-value">
              <input type="text" value="{{ item.personName }}" placeholder="请输入联系人姓名" bindinput="handleInput" data-wpyhandleinput-a="{{ index }}" data-wpyhandleinput-b="personName"/>
            </view>
          </view>

          <view class="company-detail">
            <view class="company-title">
              <text>
                联系人手机号:
              </text>
            </view>
            <view class="company-value">
              <input type="number" value="{{ item.personTelNum }}" placeholder="请输入联系人手机号码" bindinput="handleInput" data-wpyhandleinput-a="{{ index }}" data-wpyhandleinput-b="personTelNum"/>
            </view>
          </view>

          <view class="company-detail">
            <view class="company-title">
              <text>
                一般纳税人状态:
              </text>
            </view>
            <view class="company-value">
              <radio-group class="radio-group" bindchange="taxPersonChange" data-wpytaxpersonchange-a="{{ index }}">
                <label class="radio">
                  <radio value="是" checked="{{ item.isTaxPerson }}"/>是
                </label>
                <label class="radio">
                  <radio value="否" checked="{{ !item.isTaxPerson }}"/>否
                </label>
              </radio-group>
            </view>
          </view>
      </view>

      <view  wx:if="{{ companies.length !== 0 }}">
        <button type="primary" bindtap="handleSaveCompany">
          确认公司信息正确
        </button>
      </view>
    </view>

    <view wx:if="{{ companies.length !== 0 && isShow }}" class="choose-company">
      <view>
          <view>
            请选择公司：
          </view>
          <view>
            <radio-group class="radio-group" bindchange="toggleSelectCompany">
              <label class="radio is-tax" wx:for="{{ companies }}" wx:key="index">
                <radio value="{{ index }}" checked="{{ index == currentIndex }}"/>{{ item.companyName }}
              </label>
            </radio-group>
          </view>
      </view>
      <button type="primary" class="get-photo" bindtap="getPhoto">
        点击拍照或者选取照片
      </button>
    </view>
  </view>